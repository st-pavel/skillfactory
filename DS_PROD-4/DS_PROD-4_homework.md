# АНАЛИЗ ЭФФЕКТИВНОСТИ ДВУХ ВАРИАНТОВ ПОСАДОЧНОЙ СТРАНИЦЫ

Представьте, что вы — Data Scientist в туристической фирме. Компания планирует запустить новую акцию, чтобы продать как можно больше туров. Команда разработала два варианта посадочной страницы официального сайта и провела A/B-тестирование. В результате эксперимента были собраны данные — скачайте их по ссылке ниже.

Данные хранятся в файле ab_data_tourist.zip. 

Вам предстоит решить настоящую бизнес-задачу: проанализировать эффективность обоих вариантов посадочной страницы сразу по двум критериям — конверсии покупки и ежедневному среднему чеку.

Вы должны убедиться, что A/B-тестирование было проведено корректно, проверить факт стабилизации метрик и обоснованно ответить на ключевой вопрос турагентства: какой вариант посадочной страницы более предпочтителен по метрикам конверсии и ежедневного среднего чека?

Итак, компания предлагает следующие варианты туров:

- Таиланд — 100 000 рублей;

- Турция — 60 000 рублей;

- Мальдивы — 200 000 рублей;

- Санкт-Петербург — 10 000 рублей;

- Камчатка — 150 000 рублей.


Наша таблица представлена следующими полями:

user_id — идентификатор пользователя, зашедшего на сайт;

data — дата посещения сайта;

group — группа теста (контрольная — А или тестовая — B);

purchase — признак покупки: совершил ли пользователь покупку тура (1 — да, 0 — нет);

price — цена купленного тура (если покупка не состоялась, цена равна 0).


## Задание на проект

1. Проанализируйте структуру данных и проведите их предобработку:

- исследуйте структуру данных;
- преобразуйте столбцы к необходимым типам данных.
- Убедитесь в одинаковой длительности проведения A/B-тестирования в каждой из групп. Если длительность разная, унифицируйте данные, удалив лишние данные для соответствующей группы.
- Проверьте данные на наличие пропусков и избавьтесь от них, если нужно.
- Проверьте, есть ли пользователи, которые в процессе A/B-теста попали в обе группы. Если да, исключите пользователей, оказавшихся в обеих группах.

2. Сделайте первичный анализ результатов A/B-тестирования:

- Рассчитайте вспомогательные показатели для контрольной и тестовой групп:
  - количество посещений сайта;
  - суммарное количество совершённых покупок;
  - сумму всех покупок.
Сделайте промежуточные выводы по построенной таблице. Сопоставимо ли количество посещений обоих вариантов посадочной страницы? Можно ли говорить о сбалансированности выборок?

- В каждой из групп рассчитайте ключевые показатели:
  - конверсия;
  - средний чек.
Сделайте первичные выводы о результатах A/B-тестирования на основе показателей конверсии и среднего чека в каждой из групп. По какому(-им) показателю(-ям), на первый взгляд, вариант А эффективнее варианта B и наоборот?

- Сравните варианты A/B по покупательской способности каждого из туров. Для этого постройте сводную таблицу, которая покажет зависимость количества продаж от группы и цены тура. Визуализируйте полученную сводную таблицу.

Сделайте выводы по построенной таблице. По каким турам покупательская способность участников группы А выше, чем покупательская способность участников группы B, и наоборот?

3. Проанализируйте данные на предмет стабилизации метрик:

- Сгруппируйте данные по дате и группе тестирования и постройте таблицу с ежедневными данными результатов проведения A/B-тестирования. В каждой группе вычислите ежедневные показатели:

  - количество посещений страницы;
  - количество покупок;
  - сумму покупок.
- Добавьте в таблицу информацию о ежедневной конверсии (ежедневное количество покупок / ежедневное количество посещений) в группе и о ежедневном среднем чеке (ежедневная сумма покупок / ежедневное количество покупок).

- Рассчитайте кумулятивные показатели:

  - кумулятивное количество посещений страницы;
  - кумулятивное количество покупок;
  - кумулятивную сумму покупок.

- На основе полученных кумулятивных показателей вычислите кумулятивную конверсию и кумулятивный средний чек.

- Постройте кумулятивные графики конверсии и среднего чека в каждой группе по дням.

Сделайте выводы. Можно ли назвать A/B-тест завершённым? Стабилизировались ли значения метрик во времени? Как соотносятся кумулятивные показатели в каждой группе?

4. Проведите статистический анализ результатов A/B-тестирования:

- Сформулируйте статистические гипотезы, соответствующие поставленным бизнес-вопросам, и выберите статистический тест для их проверки.

Не забудьте проверить данные на нормальность там, где это необходимо.

- С помощью аппарата статистических тестов определите:

  - Есть ли статистическая разница между конверсиями в группах А и B?
  - Есть ли статистическая разница между ежедневными средними чеками в группах А и B?

- Подкрепите результаты статистических тестов, построив 95 % доверительные интервалы для:

  - конверсий в каждой из групп;
  - разницы конверсий в группах;
  - ежедневного среднего чека в каждой из групп.

- Проинтерпретируйте построенные доверительные интервалы для конверсий и ежедневного среднего чека в группах. Есть ли перекрытие между доверительными интервалами для групп? Если есть, то о чём это говорит?

5. Сделайте общий вывод по результатам A/B-теста.

Какой варианта дизайна посадочной страницы более эффективен по метрикам конверсии и ежедневного среднего чека и почему?


### Требования
→ Оформите результаты исследования как мини-отчёт в Jupyter Notebook. Отчёт должен содержать ваш код, необходимые визуализации, рассуждения и выводы по результатам. Ноутбук нужно будет отправить на проверку ментору.

→ Для визуализации вы можете использовать любую из библиотек, которые мы изучали в модуле по визуализации.

### Критерии оценивания (максимум — 7 баллов)

1. Анализ структуры и предобработка данных (1 балл)

Описание критерия	
- Студент корректно проанализировал структуру данных и выполнил их предобработку:
    - вывел информацию о структуре данных;
    - преобразовал столбцы к необходимым типам данных;
    - убедился в одинаковой длительности проведения A/B-тестирования в каждой из групп и произвёл предобработку длительностей, если это необходимо;
    - проверил данные на наличие пропусков и избавился от них, если это необходимо;
    - проверил, есть ли пользователи, которые в процессе A/B-теста попали в обе группы и, если это необходимо, исключил пользователей, оказавшихся в обеих группах.


2. Первичный анализ результатов A/B-теста (1 балл)

Описание критерия
Студент корректно выполнил первичный анализ результатов A/B-тестирования по всем пунктам:
- Рассчитал вспомогательные показатели (количество посещений сайта, суммарное количество совершённых покупок, сумма всех покупок) для контрольной и тестовой групп и привёл промежуточные выводы по построенной таблице, указав, сопоставимо ли количество посещений обоих вариантов посадочной страницы и являются ли выборки сбалансированными.
- Рассчитал ключевые показатели (конверсия, средний чек) в каждой из групп и сделал первичные выводы о результатах A/B-тестирования на основе показателей конверсии и среднего чека в каждой из групп.
- Сравнил варианты A/B по покупательской способности каждого из туров, построив и визуализировав сводную таблицу, показывающую зависимость количества продаж от группы и цены тура, и сделал выводы по построенной таблице.

3. Проверка стабилизации метрик в A/B-тесте (1 балл)

Описание критерия	
Студент корректно проанализировал данные на предмет стабилизации метрик:
- Построил таблицу с ежедневными данными результатов проведения A/B-тестирования. В каждой группе вычислил ежедневные показатели:
    - количество посещений страницы;
    - количество покупок;
    - сумму покупок;
    - конверсию;
    - средний чек.
- Рассчитал кумулятивные показатели:
    - кумулятивное количество посещений страницы;
    - кумулятивное количество покупок;
    - кумулятивную сумму покупок;
    - кумулятивную конверсию;
    - кумулятивный средний чек.
- Построил кумулятивные графики конверсии и среднего чека в каждой группе по дням, сделал выводы на основе полученных графиков, определив факт/отсутствие стабилизации метрик во времени, а также сделал вывод о том, является ли A/B-тест завершённым.

4. Статистические тесты для анализа результатов A/B-теста (1 балл)

Описание критерия
Студент подтвердил или опроверг гипотезы, полученные на этапе первичного анализа, с помощью статистических тестов:
- Формулировки статистических (нулевой и альтернативной) гипотез соответствуют поставленным бизнес-вопросам.
- Выбор статистического теста для проверки сформулированных гипотез аргументирован. Данные проверены на нормальность там, где это необходимо.
- С помощью аппарата статистических тестов определено:
    - есть ли статистическая разница между конверсиями в группах А и B;
    - есть ли статистическая разница между ежедневными средними чеками в группах А и B.

5. Доверительные интервалы для анализа результатов A/B-теста (1 балл)

Описание критерия
Студент корректно использовал и интерпретировал доверительные интервалы.
Верно построены 95 % доверительные интервалы для:
- конверсий в каждой из групп;
- разницы конверсий в группах;
- ежедневного среднего чека в каждой из групп.
Приведена развёрнутая интерпретация построенных доверительных интервалов.

6. Соответствие выводов бизнес-вопросам (1 балл)

Описание критерия
Студент привёл корректный общий вывод по результатам A/B-тестирования, дал обоснованный ответ на бизнес-вопрос «Какой из вариантов дизайна посадочной страницы сайта турагентства более предпочтителен?»

Представленные выводы верны и соответствуют результатам, полученным в ходе статистического анализа.

7. Оформление исследования (1 балл)

Описание критерия
Студент хорошо оформил решение задачи:
- Описана постановка задачи.
- В исследовании прослеживается логика, ноутбук имеет понятную структуру, разделённую на части заголовками.
- Представлены промежуточные выводы.
- Все визуализации имеют подписи к осям и заголовки и соответствуют стандартам оформления.
- Код понятный, оформлен по стандартам PEP-8, сопровождён комментариями.


data = pd.read_csv('/home/pavel/IDE/skillfactory/DS_PROD-4/data/ab_data_tourist.zip')
data.head()

Файл для выполнения проекта DS_PROD-4/DS_PROD-4_homework.ipynb

В качестве информации для выполнении проекта можно взять решения из файлов DS_PROD-4/DS_PROD-4-001.ipynb и DS_PROD-4/DS_PROD-4-002.ipynb

Выводы по ходу решения заданий должны быть лаконичными, но в то же время удовлетворяющими требованиям к проекту. 

Не допускается использование в выводимой информации - эмодзи, предпочтение отдается обычному тексту.

Работа выполняется в ipynb файле, поэтому предпочитать вывод через display(), а не print().

Этот проект - задание для студента специальности Data Science.

conda activate DS_py311_gpu
